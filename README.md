# VK Trial Auto Supporter

お試し申請の対応を自動化するプラグインです

## 依存プラグイン

- UpdraftPlus
- Contact Form 7
- User Role Editor
- WP Crontrol

## プラグイン有効化時の注意
・スケジュールイベントのスタート時間が過去の場合、プラグインを有効化した時点でスケジュールイベントが一度実行される
・updraftplusのコマンドはDBを復元するのでプラグインの有効化,無効化の情報も復元される

プラグイン有効化の手順
1. プラグインをアップロード、有効化はしない
2. プラグインのwp_schedule_eventをコメントアウト
 (プラグインを有効化するとスケジュールイベントが実行されるため、もし復元コマンドが設定されていたら復元も実行されてしまう)
3. プラグインを有効化してバックアップを取る
 (復元でプラグインが無効化されないようにするため) 
4. プラグインを無効化してバックアップで取得したnonceを書き換える
 (スケジュールイベントはプラグイン有効化時に設定されるため)
5. プラグインのwp_schedule_eventのコメントアウトを取る
 (コマンドを実行させるため)
6. プラグインを有効化してスケジュールイベントを設定する 
7. WP Crontrolプラグインでスケジュールが設定されているか確認する

※復元される初期値を変更したい場合
プラグインを無効化した後、プラグイン有効化の手順の2と3のバックアップを取る前に初期値を変える

要するに、このプラグインは有効化するとコマンドが実行されるのでデータベースが書き換わってしまう
WP Crontrolでスケジュールイベントの値を変えたりしてもDBが変わってしまうのでプラグイン有効化後に管理画面での保存は出来ないと思った方が良い

## インターバルを変更したい場合
イベントとインターバルの連携はプラグイン有効化時に設定される

よって
1. プラグインを一度無効化する
2. インターバルを変更する
3. プラグインを有効化する
すると指定した時間からイベントを実行することが出来ます

WP Crontrolプラグインを利用して「ツール > Cron イベント」からイベントを確認,今すぐ実行することが出来る
